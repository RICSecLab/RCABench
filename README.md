# RCABench

RACBench is an end-to-end benchmarking platform for evaluating root cause analysis (RCA) techniques across various targeted programs.

## Overview

Several RCA techniques have been proposed to automatically analyse the causes of software crashes caused by bugs and vulnerabilities. However, the environment for comprehensive evaluation of existing RCA techniques is inadequate, making it difficult to analyse open challenges in the field of RCA. Therefore, we have developed RCABench, a benchmarking platform for automatic and comprehensive evaluation of different RCA techniques.

RCABench was developed as part of a paper accepted for NDSS BAR 2023. If you find our work interesting, please cite our paper.

```
@inproceedings{nishimura2023rcabench,
    title={{RCABench:} Open Benchmarking Platform for Root Cause Analysis},
    author={Keisuke Nishimura, Yuichi Sugiyama, Yuki Koike, Masaya Motoda, Tomoya Kitagawa, Toshiki Takatera, Yuma Kurogome},
    booktitle={NDSS Binary Analysis Research Workshop},
    year={2023}
}
```

## Getting started

### Prerequisites

This section explains how to set up your environment for RCABench.

#### Getting the code

Clone the RCABench repository to your machine by running the following commands:

```bash
git clone https://github.com/RICSecLab/RCABench
cd RCABench
```

#### Installing prerequisites

The following software must be installed to run RCABench.

- Docker
- Python3

RCABench basically runs in Docker containers. You will also need to run a simple Python script to set up the Docker environment.Their installation should be done according to the official documentation.

#### Environment

We only tested RCABench on x86_64 Ubuntu 20.04. Currently, it is not certain whether the experiment will work on other hardware or operating systems. It is recommended that you run RCABench in the same environment.

### Usage

#### Run a data augmentation method

```bash
python3 run_exp.py \
    --da <DA_METHOD_NAME> --da_output /tmp/out \
    --exp_name tutorial --target_id libtiff_cve-2016-10094 --time 10
```

#### Run a feature extraction method

```bash
python3 run_exp.py --fe VulnLocFE --da_output /tmp/out --fe_output /tmp/out2 --exp_name tmp1 --target_id libtiff_cve-2016-10094 --time 10
```

#### Run a experiment using config file

```bash

python3 exp_manager.py
```

### Running an expriment

This section describes how to run an experiment on the target [libtiff_cve-2016-10094](./targets/README.md#list-of-currently-available-methods) using the data augmentation method [AFLcem](./data_augmentation/README.md#list-of-currently-available-methods) and the feature extraction method [VulnLocFE](./feature_extraction/README.md#list-of-currently-available-methods). You can run experiments using similar commands for other methods and targets.

First, create a directory on the host machine to store the RCA results; RCA runs on the Docker container, but the artifacts of RCA (data augmentation results and final RCA results) are shared with the host machine. For example, run the following command to create the directory:

```bash
export RCABENCH_RESULTS="/tmp/rcabench_results"
mkdir -p ${RCABENCH_RESULTS}
```

In this example, a subdirectory `rcabench_results` is created under the `/tmp` directory, but this path can be changed at will to suit your environment. The path is also exported to the environment variable `RCABENCH_RESULTS` for easier access to the shared directory in later commands.

Next, run AFLcem, a data augmentation method, with the following command:

```bash
python3 run_exp.py --da AFLcem --da_output ${RCABENCH_RESULTS}/da_output --exp_name test --target_id libtiff_cve-2016-10094 --time 10
```

This command specifies that the results of the AFLcem are saved in `${RCABENCH_RESULTS}/da_output` and that the AFLcem is run for `10` seconds. When this command is run, a docker image is created, a docker container is started, and AFLcem is run inside it. When finished, the results are saved to the `${RCABENCH_RESULTS}/da_output` directory.

Finally, using the results generated by the previous command, run VulnLocFE, a feature extraction method, with the following command:

```bash
python3 run_exp.py --fe VulnLocFE --da_output ${RCABENCH_RESULTS}/da_output --fe_output ${RCABENCH_RESULTS}/fe_output --exp_name test --target_id libtiff_cve-2016-10094 --time 10
```

When this command is run, a docker image is created, a docker container is started, and AFLcem is run inside it. When finished, the results are saved to the `${RCABENCH_RESULTS}/fe_output` directory.

### Running an experiment with a config file

This section describes an easy way to run multiple experiments using a config file.

### Adding a new target or method

You can add new targets and methods to RCABench yourself. Please refer to the following document for instructions.

- [How to add a new target](./targets/README.md#how-to-add-a-new-target)
- [How to add a new data augmentation method](./data_augmentation/README.md#how-to-add-a-new-data-augmentation-method)
- [How to add a new feature extraction method](./feature_extraction/README.md#how-to-add-a-new-feature-extraction-method)

## Contributing

Please open GitHub Issues and Pull Requests.

## License

RCABench is released under the [Apache License, Version 2.0](https://opensource.org/licenses/Apache-2.0).

## Acknowledgements

This project has received funding from the Acquisition, Technology & Logistics Agency (ATLA) under the Innovative Science and Technology Initiative for Security 2020 (JPJ004596).
